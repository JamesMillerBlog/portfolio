import { animationFunctions } from './modules/5animationFunctions'; 

var Portfolio = new animationFunctions();   

$(document).ready(function () {
	//make sure that all gifs are loaded first
	Portfolio.loadGifs();

	//when all navigation images are loaded, call Portfolio.checkPositions()
    $('.backgroundImage').imagesLoaded().done( function( instance ) {
            Portfolio.checkPositions();
    });
	// when browser is resized, call Portfolio.checkPositions()
	$( window ).resize(function() {
  		Portfolio.checkPositions();
		Portfolio.mousePos.allowAnimation = false;
	    Portfolio.page.lastScrolled = '';
	    Portfolio.checkWidth();
	});

	$(window).on( "orientationchange", function( event ) { Portfolio.checkPositions(); });

	// on mouse over of navigation button
	$(".animatingPage").mouseenter(function(){
	    Portfolio.page.isHover = $(this).attr('id');
	    //Detect what navigation button is being hovered, move the background to center the selected page 
	    for(var pageNumber = 0;pageNumber<(Portfolio.totalNumberOfItems());pageNumber++) if(Portfolio.page.isHover == 'portfolio'+pageNumber+'page' && Portfolio.page.lastScrolled != '' && Portfolio.mousePos.allowAnimation == true) Portfolio.scrollPortfolio(Portfolio.page.isHover, pageNumber-1);	   
	});
	//on mouse click
	$(".animatingPage").click(function(){
		if(Portfolio.page.isHover == "container" && Portfolio.isMobile) Portfolio.openPortfolio(Portfolio.video.wasPlayed);
		
		if(Portfolio.isTablet) {
			//open video full screen for ipad
		}
		
		//open the selected portfolio item
		for(var pageNumber = 0;pageNumber<(Portfolio.totalNumberOfItems());pageNumber++) if(Portfolio.page.isHover == 'portfolio'+pageNumber+'page' && Portfolio.page.lastScrolled != '') Portfolio.openPortfolio(Portfolio.page.isHover);	
	});

	$("#videoExit").click(function(){
		Portfolio.exitFullScreen();
	});

	//on mouse out of navigation button
	$(".animatingPage").mouseleave(function(){ 
		// console.log("Portfolio.page.lastScrolled = " + Portfolio.page.lastScrolled);
		if(Portfolio.page.lastScrolled != 'container') Portfolio.resetToHome(Portfolio.page.isHover); 
	});

	$(document).keyup(function(e) {
  		if (e.keyCode === 27) exitFullScreen();
	});

	$( "html" ).keypress(function( event ) {	
		for(Portfolio.invitation.lowerCase = 0; Portfolio.invitation.lowerCase < Portfolio.invitation.keyboardArr.length; Portfolio.invitation.lowerCase+=2){
		  	Portfolio.invitation.upperCase = (Portfolio.invitation.lowerCase+1);
		  	Portfolio.invitation.count++;
			Portfolio.page.lastClicked = "portfolio"+Portfolio.invitation.count+"page";
		  	Portfolio.invitation.keyboardEvent=event.which;
			Portfolio.mousePos.currentPosX = -Portfolio.browserSize()[0];
			Portfolio.mousePos.currentPosY = -Portfolio.browserSize()[1];
		  	Portfolio.triggerResponse(Portfolio.page.lastClicked,Portfolio.invitation.keyboardEvent);
		}
		// console.log(keyboardEvent);
	}); 

	Portfolio.loadIframes();
});