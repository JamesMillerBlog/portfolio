/*jslint browser:true*/
/*global window*/

//** SET UP ALL VARIABLES **//

//setting up mobile device if statements by detecting touch availability
var has_touch = 'ontouchstart' in document.documentElement;
//adjust the below variables to select mobiles and tablets
var isTablet = /Tablet|ipad/i.test(navigator.userAgent.toLowerCase());
var isMobile = /webos|iphone|blackberry|ipod|android. +mobile|windows phone/i.test(navigator.userAgent.toLowerCase());
//variables for determining mouse pos
var x, y, currentPosX, currentPosY;
//movement strength of background
var movementStrength = 10;
// variables for resizing navigation images
var backgroundWSize, backgroundHSize, backgroundWPos, backgroundHPos, smallHitboxWSize, smallHitboxHSize, largeHitboxWSize, largeHitboxHSize, medHitboxWSize, medHitboxHSize;
// variables for resizing the home page when nav images are scrolled over/out
var outerBtnHolderWSize, outerBtnHolderHSize, innerBtnHolderHSize, newouterBtnHolderWSize, newInnerBtnHolderHSize, newouterBtnHolderHSize, innerBtnHolderTop, outerBtnHolderTop, newInnerBtnHolderTop;
// global variables for window sizes
var windowSizeWidth, windowSizeHeight;
// boolean to detect in navigation images are animated once hovered over/out
var isAnimating = false;
// variable to check what is being hovered on, set up automatically as container
var isHover = 'container';
// math to decide movement distance that the container will animate once nav buttons are hovered over/out
var shortMovement = 1.22, mediumMovement = 1.28, longMovement = 1.29;
// store selected navigation image here
var image;
// store the last scrolled item
var lastScrolled = 'newUser';
var lastVideo;
// store home page size to determine navigation movement distance
var backgroundWMover, backgroundHMover;
// math to decide button positions within the home page, every mouse movement
var rightPosMath = 1.57, bottomPosMath = 1.73, topPosMath = 3.22, leftPosMath = 3.94;
// store values to decide the size of selected and non selected nav buttons
var growBackgroundWSize, shrinkBackgroundWSize;
var v = window.document.createElement("video");
var vid;
var divCenter;
var middleImagesHeight, newMiddleImagesHeight;
var clickedVideo = false;
var portfolioMovePosX;
var portfolioMovePosY;

//math to decide pages positions every mouse movement
var topPagePos, bottomPagePos, leftPagePos, rightPagePos, bottomPagePos, leftCornerPos, rightCornerPos, centralPos, middlePagePos;
var desktopImageSizes, smallDesktopImageSizes, tabletImageSizes, mobileImageSizes, imageResizingArr;
var imageSizeVariables = [topPagePos, leftPagePos, rightPagePos, bottomPagePos, leftCornerPos, rightCornerPos, centralPos, middlePagePos, largeHitboxHSize, largeHitboxWSize, medHitboxWSize, smallHitboxHSize, smallHitboxWSize];
//add greater than code here for large desktops ( < 1900)
var greaterThanResizer = [1024, 900, 551, 0];
var lesserThanResizer = [99999999, 1024, 900, 550];
//what size large desktop items should be
var backgroundWImageResizerArr = [7, 7, 5, 3.3];
var backgroundHImageResizerArr = [5, 6, 7, 3.5];
var navHeight = [imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[11], imageSizeVariables[11], imageSizeVariables[8]];
var navWidth, navMarginLeft, navMarginTop;
var grownChars = 0;
var currentHero = 0;
var allowAnimation = false;
var heroTextOptions = ["James Miller","Design", "Creative","Technology","Electronics", "Node", "Ideation", "Arduino", "Javascript", "Interactive", "Gamification", "Innovation", "Installations", "Prototyping", "Experiential", "Products"];
$(document).ready(function () {
	// Inject YouTube API script asynchronously
	var tag = document.createElement('script');
	tag.src = "//www.youtube.com/player_api";
	var firstScriptTag = document.getElementsByTagName('script')[0];
	firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
});
// a counter to see how many videos have been loaded
var isLoaded = 0;
//boolean to allow videos to be played once loaded
var isReady = false;
//the number of videos that will be loaded
var videoList;
//video players are stored in this array
var players = [];
//video youtubeids
var playerYoutubeIds = [];
var ID = '';
//video player for mobile devices
var player;
var myPlayerState;
var fullScreenCounter = 0;
//a variable to store previously played video when on mobile
var wasPlayed;
//variable to store whether the video is playing or not
var selectedVidLoader = 0;
//variable to store the state of the mobile device video player
var videoLoaderState;
var selectedVideo;

var keyboardArr = [/*a*/97,/*A*/65,/*b*/98,/*B*/66,/*c*/99,/*C*/67,/*d*/100,/*D*/68,/*e*/101,/*E*/69,/*f*/102,/*F*/70,/*g*/103,/*G*/71,/*h*/104,/*H*/72,/*m*/109,/*M*/77];
var count = 0;
var keyboardEvent;
var lowerCase, upperCase;
var wasHover;
var lastClicked;
var oldHover;
var heroTotalTextWidth = 0;
var loadPercentage = 0;
var videoYeah;





//** LOAD IN ALL IMAGES **//

$( document ).ready(function() {
    $.fn.bgLoaded = function(custom) {
        var self = this;

	    // Default plugin settings
	    var defaults = {
	        afterLoaded : function(){
	            this.addClass('bg-loaded');
	        }
	    };

	    // Merge default and user settings
	    var settings = $.extend({}, defaults, custom);

		    // console.log("you're all penus's")
	    // Loop through element
	    self.each(function(){
	        var $this = $(this),
	            bgImgs = $this.css('background-image').split(', ');
	        $this.data('loaded-count',0);

	        $.each( bgImgs, function(key, value){
	            var img = value.replace(/^url\(["']?/, '').replace(/["']?\)$/, '');
	            $('<img/>').attr('src', img).load(function() {
	                $(this).remove(); // prevent memory leaks
	                $this.data('loaded-count',$this.data('loaded-count')+1);
	                if ($this.data('loaded-count') >= bgImgs.length) {
	                    settings.afterLoaded.call($this);
	                }
	            });
	        });

	    });
    };
});



//** VIDEO LOGIC **//
// put all link names into an array
// loop through each item in array and push them through a function that creates appends html on a page
// call on youtubeiframeapiready function

var youtubeVidArr = ['abU5I9Tj6ZU','yVKqqdlHPLI','AlvdRkRewvA','K3N18cqnzHg','d_NQcNYMKG8','8ycTf2TDH_I','Swuka5XJRcw','wviBk2BYAzw','5hHonl2hmiU'];

function loadIframes(){
  for(var x = 0;x<youtubeVidArr.length;x++){
    if(x == 0) $( "#viewport" ).append( '<iframe id = "fullscreenVideoPlayer" src="https://www.youtube.com/embed/'+youtubeVidArr[x]+'?enablejsapi=1&loop=1&modestbranding=1&playlist='+youtubeVidArr[x]+'&rel=0&showinfo=0"></iframe>' );
    else $( "#portfolio"+x+"page .videoPlayer" ).append( '<iframe src="https://www.youtube.com/embed/'+youtubeVidArr[x]+'?enablejsapi=1&loop=1&modestbranding=1&playlist='+youtubeVidArr[x]+'&rel=0&showinfo=0" frameborder="0" allowfullscreen id="player'+x+'" class = "yPlayer" width="560" height="315"></iframe>' );
    $( "#loadPercentage p" ).html((loadPercentage+=5) +'%')
  }
}

//loop through each iframe and create a video player for it
function onYouTubeIframeAPIReady() {
  var iframes = document.querySelectorAll('.yPlayer')
  for(videoList = 0; videoList < iframes.length;videoList++) players[videoList] = createPortfolioPlayers(iframes[videoList], videoList, iframes.length);
  loadFullScreenVideoPlayer();
}
//create a player and call a function when its ready to play
function createPortfolioPlayers(playerInfo, idNumber, noOfVideos) {
  var src = $("#"+playerInfo.id).attr('src');
  YouTubeGetID(src);
  playerYoutubeIds[idNumber]=ID;
  // console.log("player info "+ playerInfo.id+ " = " +idNumber);
  // if(idNumber == noOfVideos-1) console.log('ALL IS LOADED!');
  return new YT.Player(playerInfo.id, {
     events: {
        'onReady': onPortfolioPlayerReady,
        'onStateChange': onPortfolioPlayerStateChange      
     }
  });
}
function loadFullScreenVideoPlayer(){
  player = new YT.Player('fullscreenVideoPlayer', {
    height: '100%',
    width: '100%',
    // videoId: 'M7lc1UVf-VE',
    events: {
       'onReady': onFullScreenPlayerReady,
       'onStateChange': onFullScreenPlayerStateChange
    }
  });
}
function onFullScreenPlayerReady(event){
  // var playerID = YT.get('#player3');
  // alert(playerID)
}

//when its ready to be played make sure that all the other videos are loaded, and then allow users to play the videos
function onPortfolioPlayerReady(event){
  //bind events
  isLoaded++;
  // var id = players[isLoaded].getVideoData()['video_id'];
  // console.log("video id = "+id);
  var src = $('iframe',this).attr('src');
  // console.log("video id = "+playerInfoID);
  event.target.mute();
  console.log('isLoaded = ' + isLoaded);
  console.log('videoList = ' + videoList);
  $( "#loadPercentage p" ).html((loadPercentage+=6) +'%')
  if(isLoaded == videoList){
    // YouTubeGetID("https://www.youtube.com/embed/abU5I9Tj6ZU?enablejsapi=1&loop=1&modestbranding=1&playlist=abU5I9Tj6ZU&rel=0&showinfo=0");
    $( "#loadPercentage p" ).html((loadPercentage+=7) +'%')
    console.log("videos ready");
    isReady = true;

    startWebsite();
  } 
}
//loop through and pause all videos
function pauseAllVideos(){
  for(var x = 0; x < videoList; x++){
    players[x].pauseVideo();
  }
}

function onPortfolioPlayerStateChange(event) {
  myPlayerState = event.data;
  if (isHover!= 'container' && isReady == true) animateIn();
  //if video is played on mobile
  if(myPlayerState == 1) if(isMobile) players[lastVideo].seekTo(0).unMute();
  //if video is paused or stopped on mobile
  if(myPlayerState == 2 || myPlayerState == 0) if(isMobile) players[lastVideo].mute();
   
}

function onFullScreenPlayerStateChange(event){
  videoLoaderState = event.data;
  if(selectedVidLoader == 1 && videoLoaderState == 3) player.unMute().playVideo();
  if(videoLoaderState == 1) selectedVidLoader ++;
}

function YouTubeGetID(url){
  ID = '';
  url = url.replace(/(>|<)/gi,'').split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/);
  if(url[2] !== undefined) {
    ID = url[2].split(/[^0-9a-z_\-]/i);
    ID = ID[0];
  }
  else {
    ID = url;
  }
  return ID;
}

function fullScreenMobile(){
  players[lastVideo].playVideo();
  wasPlayed = lastVideo;
  staticHome();
  clickedVideo=false;
}

function fullScreenVideoPlayer(portfolioSelection){
  if(playerYoutubeIds[portfolioSelection] != wasPlayed) player.loadVideoById(playerYoutubeIds[portfolioSelection]);
  else player.unMute().playVideo();
  wasPlayed = playerYoutubeIds[portfolioSelection];
  //animate video
  $("#" + isHover + " .videoContainer").css({'height': '100%', 'width':'100%','bottom':0,'right':0,'left':0, 'top':'0'});
  $("#" + isHover ).css({'position':'fixed'});
  $("#" + isHover + " .content" ).css({'display':'none'});
  $("#" + isHover + " .videoPlayer").css({'overflow': 'visible','bottom':0,'right':0,'left':0, 'top':0});
  $("#" + isHover + " .videoPlayer iframe").css({'width': '100%', 'height': '100%','bottom':0,'right':0,'left':0, 'top':0});
  $("#" + isHover).stop().animate({'width':'100%', 'height':'100%', 'left':0, 'top':0, 'right':0, 'bottom':0, 'margin-top': 0, 'margin-left':0},{complete: function(){ 
        $("#" + isHover ).css({'z-index': '-1000'});
        $('#fullscreenVideoPlayer').css({'display':'block'});  
        $('#container, .animatingPage, iframe').css({'display':'none'}); 
        $('#fullscreenVideoPlayer, #videoExit').css({'display':'block'}); 
  }}); 
  $('#fullscreenVideoPlayer, #videoExit').stop().animate({'opacity':'1', 'background-color':"black"});

  // setTimeout(function(){
  //   $('#container, .animatingPage, iframe').css({'display':'none'}); 
  //   $('#fullscreenVideoPlayer, #videoExit').css({'display':'block'}); 
  // }, 3000);   

  players[portfolioSelection].pauseVideo().seekTo(0);
  if(selectedVidLoader == 0) {
    selectedVidLoader++;
  }
  // alert(playerYoutubeIds[portfolioSelection]);
}

function exitFullScreen(){
  player.mute().pauseVideo();
  $('#fullscreenVideoPlayer, #videoExit, #container, .animatingPage, #' + isHover + ' .videoContainer, #'+ isHover+', #'+isHover+' .content, #'+isHover+' .videoPlayer, #'+isHover+' .videoPlayer iframe, #container, .animatingPage, iframe').css({'height': '', 'width':'','bottom':'','right':'','left':'', 'top':'', 'display': '', 'opacity':'', 'overflow': '', 'position':'', 'z-index':''});
  allowAnimation = false;
  // $("#" + isHover + " .videoContainer, #fullscreenVideoPlayer, #videoExit, #container, .animatingPage, #" + isHover + " .content", "#" + isHover + " .videoPlayer iframe, #" + isHover + " .videoPlayer").css({'height': '', 'width':'','bottom':'','right':'','left':'', 'top':'', 'display': '', 'opacity':'', 'overflow': '', 'position':''});
  clickedVideo = false; 
  checkPositions();
}


// Post Plane:
// re-export start up animation as mp4 + ogg with handbrake
// Get Izzy to sense check project text

//PHASE ONE
//1. Fix all bugs (check on different browsers with Kerve browser stack login details)
//2. Check on windows/android mobile devices (problem with android selecting mobile version of site)
//3. Fix bug where all videos reveal once clicked + screen resize reset scroll (like when vid is clicked)
//4. Recode site so that is runs more effieciently (constructor functions)

// THINGS TO CHECK
//1. Video Player Functionality: Allow pause button to work on tablet (check that this isn't just on my ipad)

//PHASE TWO
//1. Create node back end and use johnny five for arduino code + a templating engine to serve bespoke message

//PHASE THREE
//1. use leapjs to make portfolio useable with the leap motion + myo band + wordpress

//** CHECK POSITIONS **//
function checkPositions() {
    //update window sizes
    portfolioMovePosX = [ currentPosX / 1.2 + 'px', currentPosX * 1.16+'px', currentPosX/1.2+'px', currentPosX*1.16+'px', currentPosX+'px', currentPosX/1.3+'px', currentPosX*1.24+'px', currentPosX+'px'];
    portfolioMovePosY = [ currentPosY*.7+'px', currentPosY*.7+'px', currentPosY*1.3+'px', currentPosY*1.3+'px', currentPosY*.6+'px', currentPosY+'px', currentPosY+'px', currentPosY*1.4+'px'];
    windowSizeWidth = $(window).width();
	windowSizeHeight = $(window).height();
    // set size + position of each page within the website container
	$('#homepage').css({'margin-left': windowSizeWidth + 'px', 'margin-top': windowSizeHeight + 'px'});
	// set size + position of background
	$('#container').css({'height':windowSizeHeight*3 +'px ', 'width':windowSizeWidth*3 + 'px', 'margin-left': '-'+windowSizeWidth + 'px', 'margin-top': '-'+windowSizeHeight + 'px'}); 	
	//Find 37% of the size of the home page to use for movement calculations of navigation scroll overs
	backgroundWMover = $('#homepage').width()*.375, backgroundHMover = $('#homepage').height()*.375;
	//for each screen size (4), call the checkSize function
	for(var windowResizeNumber = 0;windowResizeNumber < greaterThanResizer.length; windowResizeNumber++) checkSize(windowResizeNumber); 
	//** CHECK SIZE OF SCREEN + LOAD NEW SIZES **//
	function checkSize(x){
		//based on what screen size you are on, load in different arrays that resize the divs on the screen
		if(windowSizeWidth > greaterThanResizer[x] && windowSizeWidth < lesserThanResizer[x]) {
			//set the size of all the gifs
			if(!isMobile && !isTablet) backgroundWSize = $('#homepage').width()/backgroundWImageResizerArr[x], backgroundHSize = $('#homepage').height()/backgroundHImageResizerArr[x];
			//if tablet set the sizes to load the tablet array
			if(isTablet) backgroundWSize = $('#homepage').width()/backgroundWImageResizerArr[2], backgroundHSize = $('#homepage').height()/backgroundHImageResizerArr[2];
			//if mobile set the sizes to load the mobile array
			if(isMobile) backgroundWSize = $('#homepage').width()/backgroundWImageResizerArr[3], backgroundHSize = $('#homepage').height()/backgroundHImageResizerArr[3];
			//load in desktop sizes
			desktopImageSizes = [/*topPagePos*/0.5, /*leftPagePos*/ .76, /*rightPagePos*/ 1.675, /*bottomPagePos*/ 1.7, /*leftCornerPos*/ 1.5, /*rightCornerPos*/ 1.734, /*centralPos*/ 1.272, /*middlePagePos*/ 1.32, /*large hitbox height */ backgroundHSize*4, /*large hitbox width */ backgroundWSize*4, /*med hitbox width */backgroundWSize*3, /*small hitbox height */backgroundHSize * 1.8, /*small hitbox width */backgroundWSize * 2];
			//load in small desktop sizes
			smallDesktopImageSizes = [/*topPagePos*/0.58, /*leftPagePos*/.72, /*rightPagePos*/1.72, /*bottomPagePos*/ 1.74, /*leftCornerPos*/1.5, /*rightCornerPos*/ 1.77,/*centralPos*/ 1.4,/*middlePagePos*/1.345,/*large hitbox height */backgroundHSize*4, /*large hitbox width */backgroundWSize*4,/*med hitbox width */backgroundWSize *1.5, /*small hitbox height */backgroundHSize * 1.8, /*small hitbox width */ backgroundWSize * 2];
			//load in tablet sizes
			tabletImageSizes = [/*topPagePos*/ 0.65, /*leftPagePos*/.42, /*rightPagePos*/ 1.78, /*bottomPagePos*/1.75,/*leftCornerPos*/2.3,/*rightCornerPos*/ 1.77,/*centralPos*/ 1.4,/*middlePagePos*/1.375,/*large hitbox height */backgroundHSize*4,/*large hitbox width */backgroundWSize*4,/*med hitbox width */backgroundWSize,/*small hitbox height */backgroundHSize * 1.8, /*small hitbox width */ backgroundWSize * 2];
			//load in mobile sizes
			mobileImageSizes = [/*topPagePos*/.22,/*leftPagePos*/.42,/*rightPagePos*/1.78, /*bottomPagePos*/1.635,/*leftCornerPos*/8,/*rightCornerPos*/1.66,/*centralPos*/1.348,/*middlePagePos*/1.375,/*large hitbox height */backgroundHSize*4,/*large hitbox width */backgroundWSize*4,/*med hitbox width */backgroundWSize, /*small hitbox height */backgroundHSize * 1.8, /*small hitbox width */ backgroundWSize,1.348];
			//store all loaded arrays into a larger array
			imageResizingArr = [desktopImageSizes, smallDesktopImageSizes, tabletImageSizes, mobileImageSizes];
			//set the current size of the content based on what size screen was loaded
			if(!isMobile && !isTablet) currentSize = imageResizingArr[x];
			//if tablet load the tablet array
			if(isTablet) currentSize = imageResizingArr[2];
			//if mobile load the mobile array
			if(isMobile) currentSize = imageResizingArr[3];
			//for each item in the array, call a function which will sort through the data of the array
			for(var resizeNumber = 0; resizeNumber < desktopImageSizes.length; resizeNumber++) resizeImages(resizeNumber,currentSize[resizeNumber]);
		}
		// write code that hides gifs and reveals iframes once all videos have been loaded in.
	}

	//** SORT POSITION DATA FROM ARRAY AND ASSIGN NEW ELEMENT POSITIONS **//
	function resizeImages(resizedNumber, newSize){
		//store chosen array data in a new array
		imageSizeVariables[resizedNumber] = newSize;
		//set the height of all the content
	    navHeight = [imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[8], imageSizeVariables[11], imageSizeVariables[11], imageSizeVariables[8]];
		//set the width of all the content
		navWidth = [imageSizeVariables[9], imageSizeVariables[9], imageSizeVariables[9], imageSizeVariables[9], imageSizeVariables[10], imageSizeVariables[9], imageSizeVariables[9], imageSizeVariables[10]]; 
		//set the margin left
		navMarginLeft = [windowSizeWidth/imageSizeVariables[4], windowSizeWidth*imageSizeVariables[5], windowSizeWidth/imageSizeVariables[4], windowSizeWidth*imageSizeVariables[5], windowSizeWidth*imageSizeVariables[6], windowSizeWidth*imageSizeVariables[1], windowSizeWidth*imageSizeVariables[2], windowSizeWidth*imageSizeVariables[6]];
		//set the margin top of all the content
		navMarginTop = [windowSizeHeight*imageSizeVariables[0], windowSizeHeight*imageSizeVariables[0], windowSizeHeight*imageSizeVariables[3], windowSizeHeight*imageSizeVariables[3], windowSizeHeight*imageSizeVariables[0], windowSizeHeight*imageSizeVariables[7], windowSizeHeight*imageSizeVariables[7], windowSizeHeight*imageSizeVariables[3]];
	}
	//set the size of the background image based on the screen size
	if(windowSizeWidth < 1900) $('.backgroundImage').css({'width': backgroundWSize + 'px ', 'height': backgroundHSize + 'px'});
	else if(windowSizeWidth > 1900 || windowSizeHeight > 1100) $('.backgroundImage').css({'width':backgroundWSize/1.5 +'px ', 'height':backgroundHSize/1.5+ 'px'});
 	//get size of the outer btn holder for calculations on vertical/horizontal centering
    outerBtnHolderWSize = $('#outerBtnHolder').width(), outerBtnHolderHSize = $('#outerBtnHolder').height(), innerBtnHolderHSize = $('#innerBtnHolder').height(), middleImagesHeight = $('#middleImages').height(); 
    //calculate the horizontal center
	divCenter = ($(window).width() - outerBtnHolderWSize)/2;
	//calculate the vertical center
    outerBtnHolderTop = ($('#homepage').height()-$('#outerBtnHolder').height())/2, innerBtnHolderTop = (outerBtnHolderHSize-innerBtnHolderHSize)/2;  
    // Selected page background image grows by 1.2 times its current size and other pages have their size divided by 1.8
	growBackgroundWSize = backgroundWSize*1.3, shrinkBackgroundWSize = backgroundWSize/1.9;
	//if a video hasn't been clicked and the browser window is resized
    if(clickedVideo == false){
    	$('#container').css({'opacity':1,'display':'block'});
    	// $('.videoContainer').css({'opacity':''});
    	//reset and re-center all postions of all content
	    $('#outerBtnHolder').css({'width': '', 'height': '', 'top':outerBtnHolderTop+'px','margin-left':'', 'margin-right':'', 'left':'', 'right':''}), $('#innerBtnHolder').css({'width':'', 'height': '','margin-left':'', 'margin-right':'', 'left':'', 'right':'','top':innerBtnHolderTop,'bottom':''});
	    //for each portfolio item on the page, call a function that will resize them based on screen size
    	for(var portNumber = 0;portNumber<navMarginLeft.length;portNumber++) resizePortfolio(portNumber);
    	//** RESIZE ALL CONTENT**//
		function resizePortfolio(portfolioNumber){
			$('#portfolio'+ (portfolioNumber+1) +'page').css({'height':navHeight[portfolioNumber] +'px', 'width':navWidth[portfolioNumber] +'px', 'margin-left': navMarginLeft[portfolioNumber] +'px', 'margin-top': navMarginTop[portfolioNumber] +'px'});		
		}
		//center the middle two portfolio items
	    $('#middleImages').css({'top':(innerBtnHolderHSize - middleImagesHeight)/2 +'px'});
	    $('#heroText').css({'font-size':$('#centerImage').width()/8 +'px', 'top':($('#centerImage').height()-$('#heroText').height())/2});
	    //reveal social media buttons
	    if(lastScrolled != "newUser") {
	    	$( "#linksTop, #linksBottom" ).stop().animate({'opacity': 1});
	    	$('#heroText').css({'opacity':1, 'display':'block'});
	    	$('.videoContainer').css({'opacity': 0});
		    $('.content').css({'opacity': 0});
	    	lastScrolled ='';
	    }else $('#heroText').css({'opacity':0, 'display':'none'});
		//if resize the browser window whilst scrolled over a menu item then activate complete home page reset
		if(isHover!= 'container' && lastClicked == '') resetToHome('reset');
		// $('#heroText').css({'top':($('#centerImage').height()-$('#heroText').height())/2});
		activateHeroAnimation();
    }else{
    	//if video has been clicked and page then resized

    }
    if(lastScrolled == "newUser"){
	    $('#topImage, #bottomImage, #portfolio1, #portfolio2, #portfolio3, #portfolio4, #portfolio6, #portfolio7').css({'opacity':0});
    }
	// //if there is a video that can be played, the window size is for desktops and if the use has just loaded the page then play video. 
	// if(!!v.canPlayType == true && windowSizeWidth > 1024 && lastScrolled == "newUser") animateHome(); //change this to animateHome when not in dev mode
	// //else load the page without video
	// else if(!!v.canPlayType == false || windowSizeWidth < 1024 || isMobile || $("video").get(0).paused != true) staticHome();
}

function startWebsite(){
	$("#loadScreen, #loadPercentage").stop().animate({'opacity': 0},{ duration: 2000,
    specialEasing: {
      width: "linear",
      height: "easeOutBounce"
    }, complete: function(){ 
		//if there is a video that can be played, the window size is for desktops and if the use has just loaded the page then play video. 
	    if(!!v.canPlayType == true && windowSizeWidth > 1024 && lastScrolled == "newUser") animateHome(); //change this to animateHome when not in dev mode
	    //else load the page without video
	    else if(!!v.canPlayType == false || windowSizeWidth < 1024 || isMobile) staticHome();
	}}); 
}

//** MAIN SECTION OF LOGIC **//

//on document ready
$(document).ready(function () {
	videoYeah = document.getElementById("startUpVid");

	vid = document.getElementById("startUpVid");
	// console.log(vid);

	vid.ontimeupdate = function() { myFunction() };
	function myFunction() {
		// if(vid.currentTime >= .5) $("#centerImage").addClass("designBackground");
	}

	//when all navigation images are loaded, call checkPositions()
    $('.backgroundImage').imagesLoaded().done( function( instance ) {
	    // console.log('all images successfully loaded');
            checkPositions();
    });
	// when browser is resized, call checkPositions()
	$( window ).resize(function() {
  		checkPositions();
	});
	$(window).on( "orientationchange", function( event ) { checkPositions(); });

	// on mouse over of navigation button
	$(".animatingPage").mouseenter(function(){
	    isHover = $(this).attr('id');
	    //Detect what navigation button is being hovered, move the background to center the selected page 
	    for(var pageNumber = 0;pageNumber<(portfolioMovePosX.length+1);pageNumber++) if(isHover == 'portfolio'+pageNumber+'page' && lastScrolled != '' && allowAnimation == true) scrollPortfolio(isHover, pageNumber-1);	   
	});
	//on mouse click
	$(".animatingPage").click(function(){
		if(isHover == "container" && isMobile) openPortfolio(wasPlayed);
		
		if(isTablet) {
			//open video full screen for ipad
		}
		
		//open the selected portfolio item
		for(var pageNumber = 0;pageNumber<(portfolioMovePosX.length+1);pageNumber++) if(isHover == 'portfolio'+pageNumber+'page' && lastScrolled != '') openPortfolio(isHover);	
	});

	$("#videoExit").click(function(){
		exitFullScreen();
	});

	//on mouse out of navigation button
	$(".animatingPage").mouseleave(function(){ 
		// console.log("lastScrolled = " + lastScrolled);
		if(lastScrolled != 'container') resetToHome(isHover); 
	});

	$(document).keyup(function(e) {
  		if (e.keyCode === 27) exitFullScreen();
	});

	$( "html" ).keypress(function( event ) {	
		for(lowerCase = 0; lowerCase < keyboardArr.length; lowerCase+=2){
		  	upperCase = (lowerCase+1);
		  	count++;
			lastClicked = "portfolio"+count+"page";
		  	keyboardEvent=event.which;
			currentPosX = -windowSizeWidth;
			currentPosY = -windowSizeHeight;
		  	triggerResponse(lastClicked,keyboardEvent);
		}
		// console.log(keyboardEvent);
	}); 
	  
	function triggerResponse(newHover, keyp){
		if ( keyp == keyboardArr[lowerCase] || keyp == keyboardArr[upperCase] ) {
			var counter = count-1;
			if(clickedVideo==false && counter<(keyboardArr.length/2)-1){
				if(newHover != isHover){
				    resetToHome(newHover);
				  	isHover = newHover;
					lastScrolled = '#' + newHover.substring(0,10);
					scrollPortfolio(newHover, counter);	
				}else openPortfolio(isHover);
			}else exitFullScreen(); 
			if (counter==(keyboardArr.length/2)-1 && lastScrolled != '') resetToHome(newHover);
		}
		if(count>=(keyboardArr.length/2)) count =0;
	}

	//** RESET TO HOME POSITION **//
	function resetToHome(lastPage){
		// if browser is above 1024 (is a desktop) and a video hasn't been clicked
		if(clickedVideo == false && windowSizeWidth > 1024 && !isMobile){
			// $(".staticImage").css({'opacity': 1});
			// Get the page that was just scrolled out and shrink its background image to its normal size
		    $(lastScrolled).removeClass("staticImage").addClass("backgroundImage");
		    // $(lastScrolled + 'page .content').stop().animate({"opacity":0});
			$('.videoContainer').stop().animate({"opacity": 0});
			//if videos are loaded then pause all of them
			if(isReady == true) pauseAllVideos();
			//if you've just scrolled out of a nav button
			// console.log("Last Scrolled (musn't be '') = " + lastScrolled);
			if(lastPage != 'reset' && lastScrolled != ''){
				// animation starts
			    if(!isMobile) isAnimating = true;
			    // console.log("background W size SLUT = " + backgroundWSize+'px');
				if(windowSizeWidth < 1900) $(".backgroundImage").stop().animate({'width': backgroundWSize+'px'});
    			else if (windowSizeWidth > 1900 || windowSizeHeight > 1100) $(".backgroundImage").stop().animate({'width': backgroundWSize/1.5+'px'});
				//Hide the scrolled out pages content back to opacity 0
			    // $('#' +lastPage + ' .content').stop().animate({'opacity': 0});
			    $('.content').stop().animate({'opacity': 0});
				//Make the container holding the nav buttons go back to its original size and position
				$('#middleImages').stop().animate({'top':(innerBtnHolderHSize - middleImagesHeight)/2 +'px'});
				$('#innerBtnHolder').stop().animate({'top':innerBtnHolderTop +'px'});
				$('#outerBtnHolder').stop().animate({'width': outerBtnHolderWSize +'px', 'height': outerBtnHolderHSize+'px','margin-right':'','margin-left':divCenter+'px', 'top':outerBtnHolderTop+'px'}); 
				if(lastScrolled != 'newUser') $( "#linksTop, #linksBottom" ).stop().animate({'opacity': 1});
				if(lastScrolled == "#portfolio5") {
					$('#portfolio8page').css({"display":"none"});
					setTimeout(function(){ $('#portfolio8page').css({"display":"block"}); }, 700);	
				}
				else if(lastScrolled == "#portfolio8"){
				 $('#portfolio5page').css({"display":"none"});
					setTimeout(function(){ $('#portfolio5page').css({"display":"block"}); }, 700);	
				}
				//if another navigation item isn't selected, then set hover state to container and animate by normal mouse position
			    for(var pageNumber = 1;pageNumber<8;pageNumber++){
					if(isHover != 'portfolio'+pageNumber+'page'){ 
						isHover = 'container';
				        if(allowAnimation == true) $('#container').stop().animate({'margin-left': currentPosX+'px', 'margin-top': currentPosY+'px'},{complete: function(){ isAnimating=false; }});
					}
				}
				// console.log("animate page to home position")
			//if you've just resized the screen.
			}else{
				//if the user isn't using special electronics invitation (keyboard inputs)
				if(lastClicked == ''){
				    $(lastScrolled).removeClass("staticImage").addClass("backgroundImage");
				    if(windowSizeWidth < 1900) $(".backgroundImage").css({'width': backgroundWSize+'px'});
    				else if (windowSizeWidth > 1900 || windowSizeHeight > 1100) $(".backgroundImage").css({'width': backgroundWSize/1.5+'px'});
				    $('#container').css({'opacity': 0, 'margin-left': currentPosX+'px', 'margin-top': currentPosY+'px'});
				    $('.videoContainer').css({'opacity': 0});
				    $('.content').css({'opacity': 0});
				    // $(lastScrolled).css({"opacity":1});
				    setTimeout(function(){
					    isAnimating=false;
					    $(lastScrolled + 'page .content').css({'opacity':0});
					    $('#container').css({'opacity': '1', 'margin-left': currentPosX+'px', 'margin-top': currentPosY+'px'});
					    isHover='container';
					    checkPositions();
					    // console.log("reset");
					    // $('body').css({'background-color': 'orange'});
					}, 50);		    
					//if the user is navigating the site with the electronics invitation (keyboard inputs)
				} else{
				    lastScrolled = 'container';
				    isHover='container';
					checkPositions();
					if(allowAnimation == true) $('#container').stop().animate({'margin-left': portfolioMovePosX[0], 'margin-top': portfolioMovePosY[0]},{complete: function(){isAnimating=false;}});
				}
			}
		//if a video has been clicked and then you resize the screen, then return to the standard screen navigation
		} else {
			// $('body').css({'background-color': 'red'});
		     // players[lastVideo].stopVideo();
			if(!isMobile && !isTablet) isHover = 'container';
		}
	}

	loadIframes();
});


//** MOUSE MOVEMENT NAVIGATION **//

// prevent touch screen from srolling	
$(document).bind('touchmove', function(e) {
	e.preventDefault();
});

//check size of browser + mouse position and move background accordingly
function checkWidth() {
	//restraining the movement of the background so that it the browser size
    var restrainedBrowserHeight = movementStrength / $(window).height();
    var restrainedBrowserWidth = movementStrength / $(window).width();

    //set current position of browser as negative ints, so it can be used to moved via css
    //windowSize variables are referenced from homepage.js
    windowSizeWidth = $(window).width(), windowSizeHeight = $(window).height();
    var backgroundCurrentYPos = -windowSizeHeight, backgroundCurrentXPos = -windowSizeWidth;

    //creates a pace which is a half of the users mouse speed: currentMousePosX = current mouse position - (window width / 2)
    var currentMousePosY = y - ($(window).height() / 2);
    var currentMousePosX = x - ($(window).width() / 2);

    //decides position: move background down by ((10 / height of browser) * (currentMousePosY speed)) + (the negative height of the browser)
    var newBackgroundPosX = restrainedBrowserWidth * currentMousePosX * -1 + backgroundCurrentXPos;
    var newBackgroundPosY = restrainedBrowserHeight * currentMousePosY * -1 + backgroundCurrentYPos;

    // // set view port as browser size (prevent mobile devices from scrolling)
    // $('#viewport').css({'height':windowSizeHeight +'px ', 'width':windowSizeWidth + 'px'});

    //send values to other js files that control each page
    if(lastScrolled != "newUser" && lastScrolled != "animatingHome"){
        $(function() { 
            updatePosition(newBackgroundPosX,newBackgroundPosY);
        });
    }
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
//if mobile device make background move with accelerometer data
if(has_touch){
	window.addEventListener('devicemotion', deviceMotionHandler, false);
    function deviceMotionHandler(eventData) {
		// $('#container').css({'background-color': 'red'});
   		//check size of browser and decide background position every time accelerometer data comes in
  		checkWidth();
  		//reduce strength of movement on mobile
  		movementStrength = 3;
  		//if landscape reverse y & x values and multiply the data to compensate for screen size, else remain normal
	  	var deviceY = (Math.round(event.accelerationIncludingGravity.y)) * ($('.backgroundImage').height()*3);
	  	var deviceX = (Math.round(event.accelerationIncludingGravity.x)) * ($('.backgroundImage').width()*2);
        if ($(window).height() < $(window).width()) {
	        deviceY = (Math.round(event.accelerationIncludingGravity.x) * $('.backgroundImage').width());
	        deviceX = (Math.round(event.accelerationIncludingGravity.y) * $('.backgroundImage').height()*6);
        }
        //change mouse position to accelerometer data in the checkWidth() function
         x = deviceX;	         
     	 y = deviceY; 
    };
} else {
	//if desktop then use mouse pos to move background
	$("body").mousemove(function(e){
	   	  checkWidth();
   	      //x & y = mouse position    
          x = e.pageX;	     
          y = e.pageY;		
	});
}   

function updatePosition(posX, posY) {
    //move background container based on mouse positions
	currentPosX = posX;
	currentPosY = posY;
	portfolioMovePosX = [currentPosX/1.2+'px', currentPosX*1.16+'px', currentPosX/1.2+'px', currentPosX*1.16+'px', currentPosX+'px', currentPosX/1.3+'px', currentPosX*1.24+'px', currentPosX+'px'];
	portfolioMovePosY = [currentPosY*.7+'px', currentPosY*.7+'px', currentPosY*1.3+'px', currentPosY*1.3+'px', currentPosY*.6+'px', currentPosY+'px', currentPosY+'px', currentPosY*1.4+'px'];
	//if animation between navigation buttons isn't happening 
	if (isAnimating == false && clickedVideo == false && windowSizeHeight >550){
		//detect what navigation button is being scrolled over and adjust maths mouse position accordingly
		for(var pageNumber = 0;pageNumber<portfolioMovePosX.length+1;pageNumber++) if(isHover == 'portfolio'+pageNumber+'page' && lastScrolled != '' && allowAnimation == true) scrollingPage(isHover, pageNumber-1)

		function scrollingPage(currentHover, posMovement){
			if(windowSizeWidth > 1024) $('#container').css({'margin-left': portfolioMovePosX[posMovement], 'margin-top': portfolioMovePosY[posMovement]});
		}
		//if not hovering on a nav button
		if(isHover == 'container' || windowSizeWidth < 1024) {
			//animate based on normal mouse position
			$('#container').css({'opacity': 1,'margin-left': posX+'px', 'margin-top': posY+'px'});
			//clear any inline styles on navigation images that were created with js
      if(windowSizeWidth < 1900) $('.backgroundImage').css({'width':backgroundWSize +'px ', 'height':backgroundHSize+ 'px'});
  		else if(windowSizeWidth > 1900 || windowSizeHeight > 1100) $('.backgroundImage').css({'width':backgroundWSize/1.5 +'px ', 'height':backgroundHSize/1.5+ 'px'});
      $('#innerBtnHolder').css({'width':'', 'height': '','margin-left':'', 'margin-right':'', 'left':'', 'right':'','top':innerBtnHolderTop,'bottom':''}); 
      $('.videoContainer').css({'opacity':''});
      if(isHover == 'container') lastScrolled = 'container', allowAnimation = true;
		}
        //if the initial start up video played, then hide it to reveal the still jpg
		if($("video").css('display') === 'block') $('video').css({'display': 'none'});
	}
	// console.log("last Scrolled = "+ lastScrolled);
	// console.log("is hover = "+ isHover);
}




//** START ON STATIC SCREEN **//
function staticHome(){
	// hide video
	console.log("static home triggered!");
	$('video').css({'display': 'none'});
	$( "#viewport" ).removeClass( "hide" );
	$( "#loadScreenHolder" ).addClass( "hide" ).css({'display':'none'});
	//add a background image to the home page
	// $("#centerImage").addClass("designBackground");
	$('#heroText').css({'font-size':$('#centerImage').width()/8 +'px','display':'block', 'opacity':1});	
	//reset all nav button positions
	$('#topImage, #bottomImage, #portfolio1, #portfolio2, #portfolio3, #portfolio4, #portfolio5, #portfolio6, #portfolio7, #portfolio8').css({'margin-top': '', 'margin-left': '', 'margin-right':'', 'margin-bottom': '', 'opacity': '', 'display':''});
	//activate navigation movement by clearing lastScrolled and resetting isHover + isAnimating
	lastScrolled = '';
	console.log("lastScrolled = " + lastScrolled);
	isHover = 'container';
	isAnimating = false;
	//allow nav buttons to be scrolled over by revealing the scroll buttons
	if(clickedVideo == false) $('.animatingPage').css({'display':''});
	// console.log("static home");
	activateHeroAnimation();
}

//** START ON ANIMATED SCREEN **//
function animateHome(){
	console.log("animate home launched!");
	// set video height to half the page
	var videoHeight = ($('#centerImage').height()-($('#centerImage').height()*.7))/2;
	//disable nav movement
	$( "#viewport" ).removeClass( "hide" );
	$( "#loadScreenHolder" ).addClass( "hide" ).css({'display':'none'});
	$('#startUpVid').css({'display':'block', 'opacity':1});
	document.getElementById('startUpVid').play();
	$('.animatingPage').css({'display':'none'});
	//hide nav button graphics
	$('#topImage').css({'margin-top':'20%'});
	$('#portfolio1').css({'margin-top':'20%', 'margin-left':'40%'});
	$('#portfolio2').css({'margin-top':'20%', 'margin-right':'40%'});
	$('#portfolio3').css({'margin-bottom':'20%', 'margin-left':'40%'});
	$('#portfolio4').css({'margin-bottom':'20%', 'margin-right':'40%'});
	$('#portfolio6').css({'margin-left':'40%'});
	$('#portfolio7').css({'margin-right':'40%'});
	$('#bottomImage').css({'margin-bottom':'20%'});
	var heroTextHeight = ($('#centerImage').height()-$('#heroText').height())/2;
  	$('#heroText').css({'top':heroTextHeight + 'px'});
	lastScrolled = 'animatingHome';
	// if(videoYeah.paused){
	// 	staticHome();
	// }
	$( window ).resize(function() {
  		staticHome();
	});
	// console.log("animate home");
	//set video vertical position and if the video is completed
	console.log("lastScrolled = " + lastScrolled);
	if(!videoYeah.paused) {
		console.log("lastScrolled = " + lastScrolled);
		$('video').css({'top':videoHeight + 'px'}).on('ended',function(){
	      if(lastScrolled == 'animatingHome'){
		      console.log('Video has ended!');
		      $('video').css({'display':'none'});
		      $('#heroText').css({'font-size':$('#centerImage').width()/8 +'px','display':'block'});
			  activateHeroAnimation();
			  $('#heroText').css({'width':heroTotalTextWidth +'px','bottom':0+'px','font-size':0+'px','padding-top':$('#heroText').height()/1.5+'px','padding-left':$('#heroText').width()/1.5+'px',});
		      // console.log('width of hero = ' + heroTotalTextWidth + 'px');
		      $('#heroText').stop().animate({'opacity': 1, 'font-size':$('#centerImage').width()/8 +'px', 'padding':0+'px'},{complete: function(){
			      //animate text in
			      //animate all the nav buttons to their correct positions	  
				  $('#topImage').stop().animate({'margin-top': '', 'margin-left': '', 'opacity': 1}, 500);
				  $('#portfolio1').stop().animate({'margin-top':'', 'margin-left':'', 'opacity':1}, 500);
				  $('#portfolio2').stop().animate({'margin-top':'', 'margin-right':'', 'opacity':1}, 500);
				  $('#portfolio3').stop().animate({'margin-bottom':'', 'margin-left':'', 'opacity':1}, 500);
				  $('#portfolio4').stop().animate({'margin-bottom':'', 'margin-right':'', 'opacity':1}, 500);
				  $('#portfolio6').stop().animate({'margin-left': '', 'opacity': 1}, 500);
				  $('#portfolio7').stop().animate({'margin-right': '', 'opacity': 1}, 500);
				  $('#bottomImage').stop().animate({'margin-bottom': '', 'opacity': 1},500);
				  lastScrolled = '';
				  //reset all variables so that navigation scrolling will work
				  isHover = 'container';
				  isAnimating = false;
				  //after a second, make the social links animate in
				  setTimeout(function(){
				    $( "#linksTop, #linksBottom" ).stop().animate({'opacity': 1});
				    $('.animatingPage').css({'display':'block'});
				  }, 1000);		
		      }});
	      }
	    });
	}
}


function activateHeroAnimation(){
	$elem = $('#heroText');
	var charHover, previousCharHover;
	var heroCharNumber = 0, heroSpaceNumber = 0;
	var heroTextHeight = ($('#centerImage').height()-$('#heroCharNumber1').height())/2;
	heroTotalTextWidth = 0;
	if(currentHero == 0) $( "#heroText" ).html(heroTextOptions[0]);
	var chars = jQuery.map($elem.text().split(''), function(c) {
	  var charLength, charLengthParser;
	  if(c != ' '){
		  heroCharNumber++;
		  return '<span class ="heroChar" id = "heroCharNumber'+heroCharNumber+'">' + c + '</span>';
	  }else {
	  	  heroSpaceNumber++;
		  return '<span id = heroCharSpace>' + c + '</span>';
	  }
	});
	if(heroSpaceNumber != 0) charLength = chars.length, charLengthParser = chars.length-1;
	else charLength = chars.length+1, charLengthParser = chars.length;
	$elem.html(chars.join('')); 
	$( "#heroCharSpace" ).css({'width': $( "#heroCharNumber1" ).width()+'px', 'height':$( "#heroCharNumber1" ).height()+'px'});
	$(".heroChar").mouseenter(function(){
		charHover = $(this).attr('id');
		if ($("#"+charHover).css('opacity')==='1' && windowSizeWidth > 1024 && isAnimating == false && $('.animatingPage').css('display')==='block') growChar(charHover, charLengthParser);
	});
	
	// $("#centerImage").mouseenter(function(){
	// 	allowAnimation = true;
	// 	console.log("ALLOW ANIMATION");
	// });
	for(var x = 1;x<charLength;x++){
		var heroTextWidth = $('#heroCharNumber'+x).width();
		heroTotalTextWidth += heroTextWidth;
	}
	if(heroSpaceNumber>0) heroTotalTextWidth = heroTotalTextWidth + $("#heroCharSpace").width();
	$('#heroText').css({'height':$('#heroCharNumber1').height() + 'px'});
  	$('#heroText').css({'top': heroTextHeight + 'px', 'width':heroTotalTextWidth + 'px'});

}

function growChar(selectedChar, numberOfChars){
	grownChars++;
	if(grownChars == numberOfChars) changeHero();
	$( "#"+selectedChar ).css({'opacity':'.5'});
	$( "#"+selectedChar ).stop().animate({'margin-top':'-20px'},{complete: function(){
		$( "#"+selectedChar ).stop().animate({'margin-top':'0px'});
	}});
}

function changeHero(){
	var chosenWord;
	if(currentHero == 0) currentHero++;
	for(var x = 0;x<heroTextOptions.length;x++){
		if(currentHero == x) chosenWord = heroTextOptions[x];
		if(currentHero == heroTextOptions.length) currentHero = 0, chosenWord = heroTextOptions[0];
	}
	$( "#heroText" ).stop().animate({'opacity':'0'},{complete: function(){
		$( "#heroText" ).html(chosenWord);
		$( "#heroText" ).stop().animate({'opacity':'1'});
		grownChars = 0;
		activateHeroAnimation();
	}});
	currentHero++;
}
//** SCROLLING FUNCTION **//
//Changes the math movement to match what navigation page the user has chosen
function scrollPortfolio(hovered, posmovement){
    //set last scrolled to the div that has just been hovered over
	lastScrolled = '#' + hovered.substring(0,10);
	//if the windowsize is desktop, mouse positions values are there, the height of the browser is over 500 and a video hasnt been clicked
	if(windowSizeWidth > 1024 && windowSizeHeight >500 && clickedVideo == false && isNaN(currentPosX) == false){
		//set animation to true
		isAnimating = true;
		//animate the container to the position of the item which was scrolled over, Once selected page is animated then set animation to false
		$('#container').stop().animate({'margin-left': portfolioMovePosX[posmovement], 'margin-top': portfolioMovePosY[posmovement]},{complete: function(){isAnimating=false;}});
		//add a class which will alow that div to grow
		$(lastScrolled).removeClass("backgroundImage").addClass("staticImage");
		//Make the selected pages' content appear
		$(lastScrolled + 'page .content').stop().animate({'opacity': 1});
		//Make the selected pages background image grow and once the image has grown and if the videos have been loaded, then animate the video in.
		$(".staticImage").stop().animate({'width': growBackgroundWSize+'px'},{complete: function(){ if(isReady == true) animateIn(); }}); 
		//Loop through all other pages and shrink them
		$( ".backgroundImage" ).stop().animate({'width': shrinkBackgroundWSize+'px'});
    	$( "#linksTop, #linksBottom" ).stop().animate({'opacity': 0});	
	}
}


//** ANIMATING VIDEOS ON SCROLL OVER **//
function animateIn(){
	//set the last video to what you've just scrolled over
	lastVideo = (lastScrolled.substr(lastScrolled.length - 1))-1;
	//play the selected video
	players[lastVideo].playVideo();
	//if the video is playing and it is currently hidden, then animate it in.
	if (myPlayerState == 1 && $("#" + isHover + " .videoContainer").css('opacity') === '0' && clickedVideo == false) $("#" + isHover + " .videoContainer").stop().animate({'opacity': 1});	
	// $(".staticImage").stop().animate({'opacity': 0});
}

//** OPEN VIDEO **//
function openPortfolio(clicked){
	//if is mobile and previously clicked on the same video
	if(isNaN(lastScrolled) && lastScrolled == "container" && isMobile) players[wasPlayed].unMute().seekTo(0).playVideo();
	//if a video hasn't been clicked yet, the videos have been loaded and the screen height is over 500
	if(clickedVideo == false && isReady == true && windowSizeHeight > 500){
		//set the last video to what you've just scrolled over
		lastVideo = (lastScrolled.substr(lastScrolled.length - 1))-1;
		//set up a variable which will be able to full screen the selected video
		var number = clicked.substring(9); //gets the substring from index position 3 to the end
		number = parseInt(number)-1; //converts to a number
		selectedVidLoader = 0;
		clickedVideo = true;
		// var selectedVideo = document.getElementById("player"+ (lastVideo + 1));
		// opens fullscreen video on mobile
		if(isMobile) fullScreenMobile();
		//full screen the selected video if on a desktop computer
		if(!isMobile) fullScreenVideoPlayer(number);
	}
}
